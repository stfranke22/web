version: '3.5'

services:
  selenium:
    image: selenium/standalone-chrome-debug
    network_mode: 'host'
    env_file:
      - ./test.env
    volumes:
      - /dev/shm:/dev/shm
      - ./filesForUpload:/uploads

  middleware:
    image: dpakach/owncloud-test-middleware:latest
    network_mode: 'host'
    env_file:
      - ./test.env
    volumes:
      - /var/tmp/ocis:/var/tmp/ocis
      - ./filesForUpload:/usr/src/app/filesForUpload
    environment:
      BACKEND_HOST: ${OC10_BACKEND:-http://localhost/core}
      REMOTE_BACKEND_HOST: ${OC10_REMOTE_BACKEND:-http://localhost/fed}
      RUN_ON_OCIS: 'false'
      NODE_TLS_REJECT_UNAUTHORIZED: '0'
