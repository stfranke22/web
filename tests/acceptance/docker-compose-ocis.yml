version: '3.5'

services:
  selenium:
    image: selenium/standalone-chrome-debug
    network_mode: "host"
    ports:
      - "4444:4444"
    env_file:
      - ./test.ocis.env
    volumes:
      - /dev/shm:/dev/shm
      - ./filesForUpload:/uploads

  middleware:
    image: dpakach/owncloud-test-middleware:latest
    network_mode: "host"
    ports:
      - "3000:3000"
    env_file:
      - ./test.ocis.env
    volumes:
      - /var/tmp/ocis:/var/tmp/ocis
      - ./filesForUpload:/usr/src/app/filesForUpload
    environment:
      MIDDLEWARE_PORT: 3000
      MIDDLEWARE_HOST: "0.0.0.0"
      RUN_ON_OCIS: 'true'
      NODE_TLS_REJECT_UNAUTHORIZED: '0'
